# ===============================
# DATABASE CONFIGURATION (SUPABASE)
# ===============================
spring.datasource.url=jdbc:postgresql://db.widewqtjdgbphbksxpco.supabase.co:5432/postgres?sslmode=require

spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.open-in-view=false
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL:false}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# HikariCP Connection Pool (Optimized for Supabase Transaction Pooler)
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE:1}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_HIKARI_MAX_LIFETIME:600000}

# ===============================
# SERVER CONFIGURATION (LOCAL)
# ===============================
server.port=${SERVER_PORT:8080}

# ===============================
# MAILJET HTTP API (Primary - REST API)
# Separate API Key and Secret for proper encoding
# ===============================
mailjet.api.key=${MAILJET_API_KEY}
mailjet.api.secret=${MAILJET_API_SECRET}
mailjet.api.url=${MAILJET_API_URL:https://api.mailjet.com/v3.1/send}
mailjet.enabled=${MAILJET_ENABLED:true}

# Verified sender email in Mailjet (MUST match verified sender)
mail.sender.email=${MAIL_SENDER_EMAIL}
mail.sender.name=${MAIL_SENDER_NAME:MAISON LUXE}

# ===============================
# SPRING MAIL (Mailjet SMTP - DISABLED when REST API is enabled)
# Only used as fallback if REST API fails
# ===============================
spring.mail.host=${SPRING_MAIL_HOST:in-v3.mailjet.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.from=${SPRING_MAIL_FROM}

spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:true}
spring.mail.properties.mail.smtp.starttls.required=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_REQUIRED:true}
spring.mail.properties.mail.smtp.connectiontimeout=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_CONNECTIONTIMEOUT:10000}
spring.mail.properties.mail.smtp.timeout=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_TIMEOUT:10000}
spring.mail.properties.mail.smtp.writetimeout=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_WRITETIMEOUT:10000}

# ===============================
# JWT CONFIGURATION
# ===============================
jwt.secret=${JWT_SECRET}

# ===============================
# SUPABASE CONFIGURATION
# ===============================
supabase.url=${SUPABASE_URL}
supabase.anon.key=${SUPABASE_ANON_KEY}
supabase.service.key=${SUPABASE_SERVICE_KEY}

# ===============================
# CORS CONFIGURATION (LOCAL)
# ===============================
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,http://localhost:8080}

# ===============================
# LOGGING (LOCAL DEV)
# ===============================
logging.level.org.springframework=${LOGGING_LEVEL_ORG_SPRINGFRAMEWORK:INFO}
logging.level.org.hibernate=${LOGGING_LEVEL_ORG_HIBERNATE:INFO}
logging.level.za.ac.styling=${LOGGING_LEVEL_ZA_AC_STYLING:DEBUG}
logging.level.org.springframework.web=${LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB:DEBUG}
logging.level.org.springframework.security=DEBUG
